{
  "NOP": {
    "description": {
      "short": "",
      "long": "Does nothing.",
      "tags": [],
      "operands": []
    },
    "signature": {
      "inputs": {
        "stack": [],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "SWAP": {
    "description": {
      "short": "",
      "long": "Interchanges the top two stack items. Takes two elements from the stack and pushes them back in reverse order.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "SWAP",
              "comment": "Swaps the top two elements (1 and 2)"
            }
          ],
          "stack": {
            "input": ["1", "2"],
            "output": ["2", "1"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "DUP": {
    "description": {
      "short": "",
      "long": "Duplicates the top stack item. Copies the top element of the stack and pushes the copy on top of the stack.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack is empty."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_16 42"
            },
            {
              "instruction": "DUP",
              "comment": "Duplicates the top element (42)"
            }
          ],
          "stack": {
            "input": ["42"],
            "output": ["42", "42"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "OVER": {
    "description": {
      "short": "",
      "long": "Copies the second stack item to the top. Takes the second element from the stack and pushes a copy of it on top of the stack, leaving the original element in place.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "OVER",
              "comment": "Copies the second element (1) to the top of the stack"
            }
          ],
          "stack": {
            "input": ["1", "2"],
            "output": ["1", "2", "1"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "DROP": {
    "description": {
      "short": "",
      "long": "Removes the top element from the stack. Discards the top element without using it.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack is empty."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "DROP",
              "comment": "Removes the top element (2) from the stack"
            }
          ],
          "stack": {
            "input": ["1", "2"],
            "output": ["1"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "NIP": {
    "description": {
      "short": "",
      "long": "Removes the second element from the stack.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "NIP",
              "comment": "Removes the second element (1) from the stack"
            }
          ],
          "stack": {
            "input": ["1", "2"],
            "output": ["2"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "ROT": {
    "description": {
      "short": "",
      "long": "Rearranges the top three elements. Moves the third element to the top of the stack: `1 2 3 -> 2 3 1`",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["BLKSWAP 1 2"]
        },
        {
          "exact": true,
          "instructions": ["XCHG2 s2 s1"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 3 elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "ROT",
              "comment": "Rotates the top three elements: (1,2,3) -> (2,3,1)"
            }
          ],
          "stack": {
            "input": ["1", "2", "3"],
            "output": ["2", "3", "1"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "ROTREV": {
    "description": {
      "short": "",
      "long": "Rearranges the top three elements. Places the top element below the first two following elements.: `1 2 3 -> 3 1 2`",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["BLKSWAP 2 1"]
        },
        {
          "exact": true,
          "instructions": ["XCHG2 s2 s2"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 3 elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "ROTREV",
              "comment": "Rotates in reverse the top three elements: (1,2,3) -> (3,1,2)"
            }
          ],
          "stack": {
            "input": ["1", "2", "3"],
            "output": ["3", "1", "2"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "PICK": {
    "description": {
      "short": "",
      "long": "Pops integer `i` from the stack, then performs `s(i) PUSH`.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack is empty."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i + 1` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "ROLL": {
    "description": {
      "short": "",
      "long": "Takes integer `x` from the top of the stack and moves the `x`-th element from the top to the top of the stack. For example, `ROLL 2` is equivalent to `ROT` (`1 2 3 -> 2 3 1`).",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `x + 1` elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "PUSHINT_4 2",
              "comment": "Push x=2 for ROLL"
            },
            {
              "instruction": "ROLL",
              "comment": "Moves third element (1) to the top: (1,2,3) -> (2,3,1)"
            }
          ],
          "stack": {
            "input": ["1", "2", "3", "2"],
            "output": ["2", "3", "1"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "ROLLREV": {
    "description": {
      "short": "",
      "long": "Takes integer `x` from the top of the stack and moves the top element to position `x` from the top. For example, `ROLLREV 2` is equivalent to `ROTREV` (`1 2 3 -> 3 1 2`).",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `x + 1` elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "PUSHINT_4 2",
              "comment": "Push x=2 for ROLLREV"
            },
            {
              "instruction": "ROLLREV",
              "comment": "Moves top element (3) to position 2: (1,2,3) -> (3,1,2)"
            }
          ],
          "stack": {
            "input": ["1", "2", "3", "2"],
            "output": ["3", "1", "2"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "BLKSWX": {
    "description": {
      "short": "",
      "long": "Pops integers `i`,`j` from the stack, then performs `[i] [j] BLKSWAP`.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "7",
          "condition": "Second element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i + j` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          },
          {
            "type": "simple",
            "name": "j",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "REVX": {
    "description": {
      "short": "",
      "long": "Pops integers `i`,`j` from the stack, then performs `[i] [j] REVERSE`.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "7",
          "condition": "Second element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i + j` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          },
          {
            "type": "simple",
            "name": "j",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "DROPX": {
    "description": {
      "short": "",
      "long": "Pops integer `i` from the stack, then performs `[i] BLKDROP`.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "TUCK": {
    "description": {
      "short": "",
      "long": "Copies the top stack item below the second item. For example, `1 2 -> 2 1 2`.",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["SWAP", "OVER"]
        },
        {
          "exact": true,
          "instructions": ["XCPU s1 s1"]
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "XCHGX": {
    "description": {
      "short": "",
      "long": "Pops integer `i` from the stack, then performs `s(i) XCHG`.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i + 1` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "DEPTH": {
    "description": {
      "short": "",
      "long": "Pushes the current depth of the stack.",
      "tags": [],
      "operands": [],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "DEPTH",
              "comment": "Pushes the current stack depth (3) onto the stack"
            }
          ],
          "stack": {
            "input": ["1", "2", "3"],
            "output": ["1", "2", "3", "3"]
          }
        }
      ]
    },
    "signature": {
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "depth",
            "value_types": ["Int"]
          }
        ]
      }
    }
  },
  "CHKDEPTH": {
    "description": {
      "short": "",
      "long": "Pops integer `i` from the stack and checks whether there are at least `i` elements, generating a stack underflow exception otherwise.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "ONLYTOPX": {
    "description": {
      "short": "",
      "long": "Pops integer `i` from the stack, then removes all but the top `i` elements.",
      "tags": ["stack"],
      "operands": [],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "ONLYX": {
    "description": {
      "short": "",
      "long": "Pops integer `i` from the stack, then leaves only the bottom `i` elements.",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": false,
          "instructions": ["DEPTH", "SWAP", "SUB", "DROPX"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 1 element."
        },
        {
          "errno": "7",
          "condition": "Top element is not an `Int`."
        },
        {
          "errno": "5",
          "condition": "Integer is out of range."
        },
        {
          "errno": "2",
          "condition": "Stack contains less than `i` elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "i",
            "value_types": ["Int"],
            "range": {
              "min": 0,
              "max": 1073741823
            }
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "BLKDROP": {
    "description": {
      "short": "",
      "long": "Removes the top `i` elements from the stack. Equivalent to `DROP` performed `i` times.",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `i` elements."
        }
      ]
    }
  },
  "XC2PU": {
    "description": {
      "short": "",
      "long": "Performs a double exchange (`s(i) s(j) XCHG2`) followed by pushing a value (`s(k) PUSH`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["XCHG2 s(i) s(j)", "PUSH s(k)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 2` elements."
        }
      ]
    }
  },
  "XCPU2": {
    "description": {
      "short": "",
      "long": "Exchanges `i`-th element with top (`s(i) XCHG_0I`) and pushes two values (`s(j) s(k) PUSH2`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["XCHG_0I s(i)", "PUSH2 s(j) s(k)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k+1) + 1` elements."
        }
      ]
    }
  },
  "PUSH3": {
    "description": {
      "short": "",
      "long": "Pushes three values from different stack positions (`PUSH s(i)`, `PUSH2 s(j+1) s(k+1)`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH s(i)", "PUSH2 s(j+1) s(k+1)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 1` elements."
        }
      ]
    }
  },
  "XCHG2": {
    "description": {
      "short": "",
      "long": "Performs two stack element exchanges in sequence (`XCHG_0I s(i)`, `XCHG_0I s(j)`).",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["XCHG_0I s(i)", "XCHG_0I s(j)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j) + 2` elements."
        }
      ]
    }
  },
  "XCPU": {
    "description": {
      "short": "",
      "long": "Exchanges `i`-th element with top (`XCHG_0I s(i)`) and pushes `j`-th element (`PUSH s(j)`).",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["XCHG_0I s(i)", "PUSH s(j)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j) + 1` elements."
        }
      ]
    }
  },
  "PUSH2": {
    "description": {
      "short": "",
      "long": "Pushes two values from `i`-th and `j`-th positions (`PUSH s(i)`, `PUSH s(j+1)`).",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH s(i)", "PUSH s(j+1)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j+1) + 1` elements."
        }
      ]
    }
  },
  "PUXC": {
    "description": {
      "short": "",
      "long": "Pushes `i`-th element, swaps it, and exchanges with `j`-th element (`PUSH s(i)`, `SWAP`, `XCHG_0I s(j)`).",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH s(i)", "SWAP", "XCHG_0I s(j)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j) + 1` elements."
        }
      ]
    }
  },
  "XCPUXC": {
    "description": {
      "short": "",
      "long": "Exchanges second with `i`-th element, then performs PUXC with `j` and `k-1` (`XCHG_1I s(i)`, `PUXC s(j) s(k-1)`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["XCHG_1I s1 s(i)", "PUXC s(j) s(k-1)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 1` elements."
        }
      ]
    }
  },
  "PUXC2": {
    "description": {
      "short": "",
      "long": "Pushes `i`-th element, exchanges with third, then performs XCHG2 with `j` and `k` (`PUSH s(i)`, `XCHG_0I s2`, `XCHG2 s(j) s(k)`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH s(i)", "XCHG_0I s2", "XCHG2 s(j) s(k)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 2` elements."
        }
      ]
    }
  },
  "PUXCPU": {
    "description": {
      "short": "",
      "long": "Performs PUXC with `i` and `j-1`, then pushes `k`-th element (`PUXC s(i) s(j-1)`, `PUSH s(k)`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUXC s(i) s(j-1)", "PUSH s(k)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 1` elements."
        }
      ]
    }
  },
  "PU2XC": {
    "description": {
      "short": "",
      "long": "Pushes `i`-th element, swaps it, then performs PUXC with `j` and `k-1` (`PUSH s(i)`, `SWAP`, `PUXC s(j) s(k-1)`).",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH s(i)", "SWAP", "PUXC s(j) s(k-1)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 1` elements."
        }
      ]
    }
  },
  "BLKSWAP": {
    "description": {
      "short": "",
      "long": "Permutes two blocks `s[j+i+1] ... s[j+1]` and `s(j) ... s0`.",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "other_implementations": [
        {
          "exact": false,
          "instructions": ["REVERSE [i+1] [j+1]", "REVERSE [j+1] 0", "REVERSE [i+j+2] 0"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `i + j + 2` elements."
        }
      ]
    }
  },
  "REVERSE": {
    "description": {
      "short": "",
      "long": "Reverses the order of `s[j+i+1] ... s(j)`.",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `i + j + 2` elements."
        }
      ]
    }
  },
  "BLKPUSH": {
    "description": {
      "short": "",
      "long": "Performs `PUSH s(j)` `i` times.",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `j + 1` elements."
        }
      ]
    }
  },
  "BLKDROP2": {
    "description": {
      "short": "",
      "long": "Drops `i` stack elements under the top `j` elements.",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["REVERSE [i+j] 0", "BLKDROP [i]", "REVERSE [j] 0"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `i + j` elements."
        }
      ]
    }
  },
  "2SWAP": {
    "description": {
      "short": "",
      "long": "Swaps two pairs of stack elements like `2 2 BLKSWAP` or `s3 s2 XCHG2`.",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["BLKSWAP 2 2"]
        },
        {
          "exact": true,
          "instructions": ["XCHG2 s3 s2"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 4 elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "k",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "k",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "2DROP": {
    "description": {
      "short": "",
      "long": "Removes top two elements from the stack.",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["DROP", "DROP"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [],
        "registers": []
      }
    }
  },
  "2DUP": {
    "description": {
      "short": "",
      "long": "Duplicates top two stack elements.",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH2 s1 s0"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 2 elements."
        }
      ],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "DUP2",
              "comment": "Duplicates the top two elements (1,2) and pushes them onto the stack"
            }
          ],
          "stack": {
            "input": ["1", "2"],
            "output": ["1", "2", "1", "2"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "2OVER": {
    "description": {
      "short": "",
      "long": "Copies third and fourth stack elements to the top.",
      "tags": ["stack"],
      "operands": [],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["PUSH2 s3 s2"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than 4 elements."
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "k",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "x",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "k",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "z",
            "value_types": ["Any"]
          },
          {
            "type": "simple",
            "name": "y",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "XCHG3": {
    "description": {
      "short": "",
      "long": "Performs `s2 s(i) XCHG`, `s1 s(j) XCHG`, and finally `s(k) XCHG_0I`.",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "related_instructions": ["XCHG3_ALT"],
      "other_implementations": [
        {
          "exact": true,
          "instructions": ["XCHG_IJ s2 s(i)", "XCHG_0I s(j)", "XCHG_0I s(k)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 3` elements."
        }
      ]
    }
  },
  "XCHG3_ALT": {
    "description": {
      "short": "",
      "long": "Performs `s2 s(i) XCHG`, `s1 s(j) XCHG`, and finally `s(k) XCHG_0I`. This is a long form of `XCHG3`.",
      "tags": ["stack"],
      "operands": ["i", "j", "k"],
      "related_instructions": ["XCHG3"],
      "other_implementations": [
        {
          "exact": false,
          "instructions": ["XCHG_IJ s2 s(i)", "XCHG_0I s(j)", "XCHG_0I s(k)"]
        }
      ],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack contains less than `max(i,j,k) + 3` elements."
        }
      ]
    }
  },
  "XCHG_0I_LONG": {
    "description": {
      "short": "Interchanges top element with element at index `i`.",
      "long": "This instruction is equivalent to `XCHG_0I` except that it operates on a integer value with bigger range.",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ],
      "related_instructions": ["XCHG_0I"]
    }
  },
  "XCHG_0I": {
    "description": {
      "short": "Interchanges top element with element at index `i`.",
      "long": "",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ],
      "related_instructions": ["XCHG_0I_LONG"],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "XCHG_0I s2",
              "comment": "Swaps top element (3) with element at index 2 (1)"
            }
          ],
          "stack": {
            "input": ["1", "2", "3"],
            "output": ["3", "2", "1"]
          }
        },
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "XCHG_0I s5",
              "comment": "Trying to swap with an element at index 5, which doesn't exist"
            }
          ],
          "exit_code": 2,
          "stack": {
            "input": ["1", "2"],
            "output": ["1", "2"]
          }
        }
      ]
    }
  },
  "XCHG_IJ": {
    "description": {
      "short": "Interchanges elements at indices `i` and `j`.",
      "long": "",
      "tags": ["stack"],
      "operands": ["i", "j"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i` or `j`"
        }
      ]
    }
  },
  "XCHG_1I": {
    "description": {
      "short": "Interchanges second element with element at index `i`.",
      "long": "",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Stack is empty."
        },
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ]
    }
  },
  "PUSH": {
    "description": {
      "short": "Copy value of `s(i)` and pushes it onto the stack.",
      "long": "",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ],
      "related_instructions": ["PUSH_LONG"],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSH s1",
              "comment": "Pushes 1 onto the stack."
            }
          ],
          "stack": {
            "input": ["1", "2"],
            "output": ["1", "2", "1"]
          }
        },
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSH s10",
              "comment": "Trying to push a value from"
            },
            {
              "instruction": "        ",
              "comment": "an index that is out of bounds."
            }
          ],
          "exit_code": 2,
          "stack": {
            "input": ["1", "2"],
            "output": ["1", "2"]
          }
        }
      ]
    },
    "signature": {
      "inputs": {
        "stack": [],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "value",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "PUSH_LONG": {
    "description": {
      "short": "Copy value of `s(i)` and pushes it onto the stack.",
      "long": "Copy value of `s(i)` and pushes it onto the stack. This instruction is equivalent to `PUSH` except that it operates on a integer value with bigger range.",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ],
      "related_instructions": ["PUSH"]
    },
    "signature": {
      "inputs": {
        "stack": [],
        "registers": []
      },
      "outputs": {
        "stack": [
          {
            "type": "simple",
            "name": "value",
            "value_types": ["Any"]
          }
        ],
        "registers": []
      }
    }
  },
  "POP": {
    "description": {
      "short": "Removes the top element from the stack and stores it in `s(i)`. If `i` equal to 0, POP is effectively a `DROP`, i.e. the top element is removed from the stack.",
      "long": "",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ],
      "related_instructions": ["POP_LONG"],
      "examples": [
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "PUSHINT_4 2"
            },
            {
              "instruction": "PUSHINT_4 3"
            },
            {
              "instruction": "POP s2",
              "comment": "Removes top element (3) and stores it in position s2, replacing the value 1"
            }
          ],
          "stack": {
            "input": ["1", "2", "3"],
            "output": ["3", "2"]
          }
        },
        {
          "instructions": [
            {
              "instruction": "PUSHINT_4 1"
            },
            {
              "instruction": "POP s3",
              "comment": "Trying to pop to an index that is out of bounds"
            }
          ],
          "exit_code": 2,
          "stack": {
            "input": ["1"],
            "output": ["1"]
          }
        }
      ]
    }
  },
  "POP_LONG": {
    "description": {
      "short": "Removes the top element from the stack and stores it in `s(i).`",
      "long": "Removes the top element from the stack and stores it in `s(i)`. If `i` equal to 0, `POP_LONG` is effectively a `DROP`, i.e. the top element is removed from the stack. This instruction is equivalent to `POP` except that it operates on a integer value with bigger range.",
      "tags": ["stack"],
      "operands": ["i"],
      "exit_codes": [
        {
          "errno": "2",
          "condition": "Count of elements on the stack is less or equal to `i`"
        }
      ],
      "related_instructions": ["POP"]
    }
  }
}
